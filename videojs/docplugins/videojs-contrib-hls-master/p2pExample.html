<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>video.js HLS Plugin Example</title>

    <link href="node_modules/video.js/dist/video-js/video-js.css" rel="stylesheet">

    <!-- peer5.js -->
    <script src="//api.peer5.com/peer5.js?id=ncp2vywz762cq79dgwd7"></script>
    <!-- video.js -->
    <script src="node_modules/video.js/dist/video-js/video.js"></script>

    <!-- Media Sources plugin -->
    <script src="node_modules/videojs-contrib-media-sources/src/videojs-media-sources.js"></script>

    <!-- HLS plugin -->
    <script src="src/videojs-hls.js"></script>

    <!-- segment handling -->
    <script src="src/peer5-request.js"></script>
    <script src="src/flv-tag.js"></script>
    <script src="src/stream.js"></script>
    <script src="src/exp-golomb.js"></script>
    <script src="src/h264-stream.js"></script>
    <script src="src/aac-stream.js"></script>
    <script src="src/metadata-stream.js"></script>
    <script src="src/segment-parser.js"></script>

    <!-- m3u8 handling -->
    <script src="src/m3u8/m3u8-parser.js"></script>
    <script src="src/playlist-loader.js"></script>

    <script src="node_modules/pkcs7/dist/pkcs7.unpad.js"></script>
    <script src="src/decrypter.js"></script>

    <script src="src/bin-utils.js"></script>

    <!-- example MPEG2-TS segments -->
    <!-- bipbop -->
    <!-- <script src="test/tsSegment.js"></script> -->
    <!-- bunnies -->
    <!--<script src="test/tsSegment-bc.js"></script>-->

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .info {
            background-color: #eee;
            border: thin solid #333;
            border-radius: 3px;
            padding: 0 5px;
            margin: 20px 0;
        }
    </style>

</head>
<body>
<div class="info">
    <p>The video below is an <a
            href="https://developer.apple.com/library/ios/documentation/networkinginternet/conceptual/streamingmediaguide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008332-CH1-SW1">HTTP
        Live Stream</a>. On desktop browsers other than Safari, the HLS plugin will polyfill support for the format on
        top of the video.js Flash tech.</p>

    <p>Due to security restrictions in Flash, you will have to load this page over HTTP(S) to see the example in
        action.</p>
</div>
<video id="video"
       class="video-js vjs-default-skin"
       height="300"
       width="600"
       controls>
    <source
            src="https://storage.googleapis.com/peer5_vod/hls1/stream_1000k_48k_640x360.m3u8"
            type="application/x-mpegURL">
</video>
<script>
    videojs.options.flash.swf = 'node_modules/video.js/dist/video-js/video-js.swf';
    // initialize the player
    var player = videojs('video');
    function P2PPerformanceUpdate(total) {
        // custom code goes here
        document.querySelector('.stats .HTTP').innerHTML = total.http;
        document.querySelector('.stats .P2P').innerHTML = total.p2p;
        document.querySelector('.stats .Total').innerHTML = total.loaded;
        document.querySelector('.stats .Efficiency').innerHTML = Math.round(100 * ((total.p2p + total.fs) / total.loaded)) + '%';
        document.querySelector('.stats .Sent').innerHTML = total.sent;
        document.querySelector('.stats .NumOfPeers').innerHTML = total.numOfPeers;
    }
</script>
<div class="stats"> Loaded in bytes<br>

    <div>P2P: &nbsp;&nbsp;<span class="P2P">0</span></div>
    <div>HTTP: &nbsp;<span class="HTTP">0</span></div>
    <div>Total: <span class="Total">0</span></div>
    <div>Effic: <span class="Efficiency">0</span></div>
    <div>Sent: &nbsp;<span class="Sent">0</span></div>
    <div>Peers: <span class="NumOfPeers">0</span></div>
</div>
<style>
    body {
        padding-left: 250px;
        font-family: "Helvetica Neue Light", "HelveticaNeue-Light", "Helvetica Neue", Calibri, Helvetica, Arial;
    }

    .stats {
        position: fixed;
        left: 0px;
        top: 0px;
        padding: 20px;
        background: #000000;
        opacity: 0.7;
        font-family: "Courier New", Courier, monospace;
        color: lightcyan;
        font-size: 1.1em;
    }
</style>
</script>
</
body >
< / html >
